// CodeMirror version 2.2
var CodeMirror=function(){function x(a,b){function c(z){return 0<=z&&z<u.size}function e(z){for(var a=u;!a.lines;)for(var l=0;;++l){var b=a.children[l],e=b.chunkSize();if(z<e){a=b;break}z-=e}return a.lines[z]}function k(a,t){qa=!0;for(var l=t-a.height,b=a;b;b=b.parent)b.height+=l}function q(a){var t={line:0,ch:0};P(t,{line:u.size-1,ch:e(u.size-1).text.length},g(a),t,t);za=!0}function H(a){var t=v[a.keyCode],l=ca[n.keyMap].auto,b,e;if(null==t||a.altGraphKey)return l&&(n.keyMap=l),null;a.altKey&&(t="Alt-"+t);a.ctrlKey&&(t="Ctrl-"+t);a.metaKey&&(t="Cmd-"+t);a.shiftKey&&(b=Q("Shift-"+t,n.extraKeys,n.keyMap))?e=!0:b=Q(t,n.extraKeys,n.keyMap);"string"==typeof b&&(b=La.propertyIsEnumerable(b)?La[b]:null);(t=l)&&!(t=b)&&(t=v[a.keyCode],t=!("Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t));t&&(n.keyMap=l);if(!b)return!1;e?(l=ma,ma=null,b(R),ma=l):b(R);y(a);return!0}function h(){if(!n.readOnly){if(!na){if(n.onFocus)n.onFocus(R);na=!0;-1==S.className.search(/\bCodeMirror-focused\b/)&&(S.className+=" CodeMirror-focused");Qa||pb(!0)}eb();Kb()}}function D(){if(na){if(n.onBlur)n.onBlur(R);na=!1;S.className=S.className.replace(" CodeMirror-focused","")}clearInterval(qb);setTimeout(function(){na||(ma=null)},150)}function P(a,t,l,b,e){if(oa){var c=[];u.iter(a.line,t.line+1,function(a){c.push(a.text)});for(oa.addChange(a.line,l.length,c);oa.done.length>n.undoDepth;)oa.done.shift()}ea(a,t,l,b,e)}function W(a,t){var l=a.pop();if(l){var b=[],c=l.start+l.added;u.iter(l.start,c,function(a){b.push(a.text)});t.push({start:l.start,added:l.old.length,old:b});var k=X({line:l.start+l.old.length-1,ch:rb(b[b.length-1],l.old[l.old.length-1])});ea({line:l.start,ch:0},{line:c-1,ch:e(c-1).text.length},l.old,k,k);za=!0}}function ea(a,t,l,b,c){function g(a){return a<=Math.min(t.line,t.line+D)?a:a+D}var d=!1,q=Aa.length;n.lineWrapping||u.iter(a.line,t.line,function(a){if(a.text.length==q)return d=!0});if(a.line!=t.line||1<l.length)qa=!0;var H=t.line-a.line,f=e(a.line),h=e(t.line);if(0==a.ch&&0==t.ch&&""==l[l.length-1]){var p=[],f=null;a.line?(f=e(a.line-1),f.fixMarkEnds(h)):h.fixMarkStarts();for(var v=0,M=l.length-1;v<M;++v)p.push(F.inheritMarks(l[v],f));H&&u.remove(a.line,H,Ra);p.length&&u.insert(a.line,p)}else if(f==h)if(1==l.length)f.replace(a.ch,t.ch,l[0]);else{h=f.split(t.ch,l[l.length-1]);f.replace(a.ch,null,l[0]);f.fixMarkEnds(h);p=[];v=1;for(M=l.length-1;v<M;++v)p.push(F.inheritMarks(l[v],f));p.push(h);u.insert(a.line+1,p)}else if(1==l.length)f.replace(a.ch,null,l[0]),h.replace(null,t.ch,""),f.append(h),u.remove(a.line+1,H,Ra);else{p=[];f.replace(a.ch,null,l[0]);h.replace(null,t.ch,l[l.length-1]);f.fixMarkEnds(h);v=1;for(M=l.length-1;v<M;++v)p.push(F.inheritMarks(l[v],f));1<H&&u.remove(a.line+1,H-1,Ra);u.insert(a.line+1,p)}if(n.lineWrapping){var r=B.clientWidth/sb()-3;u.iter(a.line,a.line+l.length,function(a){if(!a.hidden){var z=Math.ceil(a.text.length/r)||1;z!=a.height&&k(a,z)}})}else u.iter(a.line,v+l.length,function(a){a=a.text;a.length>q&&(Aa=a,q=a.length,Ba=null,d=!1)}),d&&(q=0,Aa="",Ba=null,u.iter(0,u.size,function(a){a=a.text;a.length>q&&(q=a.length,Aa=a)}));for(var h=[],D=l.length-H-1,v=0,H=ra.length;v<H;++v)p=ra[v],p<a.line?h.push(p):p>t.line&&h.push(p+D);v=a.line+Math.min(l.length,500);kc(a.line,v);h.push(v);ra=h;tb(100);Z.push({from:a.line,to:t.line+1,diff:D});a={from:a,to:t,text:l};if(Sa){for(l=Sa;l.next;l=l.next);l.next=a}else Sa=a;Ta(b,c,g(m.from.line),g(m.to.line));ga.style.height=u.height*xa()+2*L.offsetTop+"px"}function sa(a,t,l){function b(c){if(ia(c,t))return c;if(!ia(l,c))return e;var jc=c.line+a.length-(l.line-t.line)-1,k=c.ch;c.line==l.line&&(k+=a[a.length-1].length-(l.ch-(l.line==t.line?t.ch:0)));return{line:jc,ch:k}}t=X(t);l=l?X(l):t;a=g(a);var e;ha(a,t,l,function(a){e=a;return{from:b(m.from),to:b(m.to)}});return e}function Ua(a,t){ha(g(a),m.from,m.to,function(a){return"end"==t?{from:a,to:a}:"start"==t?{from:m.from,to:m.from}:{from:m.from,to:a}})}function ha(a,t,b,c){c=c({line:t.line+a.length-1,ch:1==a.length?a[0].length+t.ch:a[a.length-1].length});P(t,b,a,c.from,c.to)}function Lb(a,t){var b=a.line,c=t.line;if(b==c)return e(b).text.slice(a.ch,t.ch);var k=[e(b).text.slice(a.ch)];u.iter(b+1,c,function(a){k.push(a.text)});k.push(e(c).text.slice(0,t.ch));return k.join("\n")}function fb(){return Lb(m.from,m.to)}function eb(){ub||vb.set(n.pollInterval,function(){wb();wa();na&&eb();xb()})}function Va(){function a(){wb();wa()||b?(ub=!1,eb()):(b=!0,vb.set(60,a));xb()}var b=!1;ub=!0;vb.set(20,a)}function wa(){if(Qa||!na||M(K))return!1;var a=K.value;if(a==Ca)return!1;ma=null;for(var b=0,l=Math.min(Ca.length,a.length);b<l&&Ca[b]==a[b];)++b;b<Ca.length?m.from={line:m.from.line,ch:m.from.ch-(Ca.length-b)}:yb&&r(m.from,m.to)&&(m.to={line:m.to.line,ch:Math.min(e(m.to.line).text.length,m.to.ch+(a.length-b))});Ua(a.slice(b),"end");Ca=a;return!0}function pb(a){r(m.from,m.to)?a&&(Ca=K.value=""):(Ca="",K.value=fb(),K.select())}function Ia(){n.readOnly||K.focus()}function lc(){if(ta.getBoundingClientRect){var a=ta.getBoundingClientRect();if(!Da||a.top!=a.bottom){var b=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>a.top||a.bottom>b)&&ta.scrollIntoView()}}}function Mb(){var a=Wa(m.inverted?m.from:m.to),b=n.lineWrapping?Math.min(a.x,L.offsetWidth):a.x;return Nb(b,a.y,b,a.yBot)}function Nb(a,b,l,c){var e=L.offsetLeft,k=L.offsetTop,g=xa();b+=k;c+=k;a+=e;l+=e;var d=B.clientHeight,m=B.scrollTop,e=!1,k=!0;b<m?(B.scrollTop=Math.max(0,b-2*g),e=!0):c>m+d&&(B.scrollTop=c+g-d,e=!0);b=B.clientWidth;c=B.scrollLeft;g=n.fixedGutter?fa.clientWidth:0;a<c+g?(50>a&&(a=0),B.scrollLeft=Math.max(0,a-10-g),e=!0):l>b+c-3&&(B.scrollLeft=l+10-b,e=!0,l>ga.clientWidth&&(k=!1));if(e&&n.onScroll)n.onScroll(R);return k}function Ob(){var a=xa(),b=B.scrollTop-L.offsetTop,l=Math.ceil((b+B.clientHeight)/a);return{from:pa(u,Math.max(0,Math.floor(b/a))),to:pa(u,l)}}function Xa(a,b){if(B.clientWidth){var l=Ob();if(!(!0!==a&&0==a.length&&l.from>=aa&&l.to<=ja)){var c=Math.max(l.from-100,0),l=Math.min(u.size,l.to+100);aa<c&&20>c-aa&&(c=aa);ja>l&&20>ja-l&&(l=Math.min(u.size,ja));for(var e=!0===a?[]:mc([{from:aa,to:ja,domStart:0}],a),g=0,d=0;d<e.length;++d){var m=e[d];m.from<c&&(m.domStart+=c-m.from,m.from=c);m.to>l&&(m.to=l);m.from>=m.to?e.splice(d--,1):g+=m.to-m.from}if(g!=l-c){e.sort(function(a,z){return a.domStart-z.domStart});var q=xa(),g=fa.style.display;ka.style.display=fa.style.display="none";nc(c,l,e);ka.style.display="";(d=c!=aa||l!=ja||Pb!=B.clientHeight+q)&&(Pb=B.clientHeight+q);aa=c;ja=l;Ya=O(u,c);gb.style.top=Ya*q+"px";ga.style.height=u.height*q+2*L.offsetTop+"px";if(ka.childNodes.length!=ja-aa)throw Error("BAD PATCH! "+JSON.stringify(e)+" size\x3d"+(ja-aa)+" nodes\x3d"+ka.childNodes.length);if(n.lineWrapping){Ba=B.clientWidth;var f=ka.firstChild;u.iter(aa,ja,function(a){if(!a.hidden){var z=Math.round(f.offsetHeight/q)||1;a.height!=z&&(k(a,z),qa=!0)}f=f.nextSibling})}else null==Ba&&(Ba=zb(Aa)),Ba>B.clientWidth?(L.style.width=Ba+"px",ga.style.width="",ga.style.width=B.scrollWidth+"px"):L.style.width=ga.style.width="";fa.style.display=g;(d||qa)&&Qb();Rb();if(!b&&n.onUpdate)n.onUpdate(R);return!0}}}else aa=ja=Ya=0}function mc(a,b){for(var l=0,c=b.length||0;l<c;++l){for(var e=b[l],k=[],g=e.diff||0,d=0,m=a.length;d<m;++d){var q=a[d];e.to<=q.from&&e.diff?k.push({from:q.from+g,to:q.to+g,domStart:q.domStart}):e.to<=q.from||e.from>=q.to?k.push(q):(e.from>q.from&&k.push({from:q.from,to:e.from,domStart:q.domStart}),e.to<q.to&&k.push({from:e.to+g,to:q.to+g,domStart:q.domStart+(e.to-q.from)}))}a=k}return a}function nc(a,b,l){if(l.length){for(var c=function(a){var z=a.nextSibling;a.parentNode.removeChild(a);return z},e=0,k=ka.firstChild,g=0;g<l.length;++g){for(var d=l[g];d.domStart>e;)k=c(k),e++;for(var q=0,d=d.to-d.from;q<d;++q)k=k.nextSibling,e++}for(;k;)k=c(k)}else ka.innerHTML="";var f=l.shift(),k=ka.firstChild,q=a,H=m.from.line,h=m.to.line,v=H<a&&h>=a,p=Ja.createElement("div");u.iter(a,b,function(a){var z=null,b=null;v?(z=0,h==q&&(v=!1,b=m.to.ch)):H==q&&(h==q?(z=m.from.ch,b=m.to.ch):(v=!0,z=m.from.ch));f&&f.to==q&&(f=l.shift());!f||f.from>q?(p.innerHTML=a.hidden?"\x3cpre\x3e\x3c/pre\x3e":a.getHTML(z,b,!0,Ab),ka.insertBefore(p.firstChild,k)):k=k.nextSibling;++q})}function Qb(){if(n.gutter||n.lineNumbers){var a=gb.offsetHeight,b=B.clientHeight;fa.style.height=(2>a-b?b:a)+"px";var l=[],c=aa;u.iter(aa,Math.max(ja,aa+1),function(a){if(a.hidden)l.push("\x3cpre\x3e\x3c/pre\x3e");else{var z=a.gutterMarker,b=n.lineNumbers?c+n.firstLineNumber:null;z&&z.text?b=z.text.replace("%N%",null!=b?b:""):null==b&&(b="\u00a0");l.push(z&&z.style?'\x3cpre class\x3d"'+z.style+'"\x3e':"\x3cpre\x3e",b);for(z=1;z<a.height;++z)l.push("\x3cbr/\x3e\x26#160;");l.push("\x3c/pre\x3e")}++c});fa.style.display="none";Za.innerHTML=l.join("");for(var a=String(u.size).length,b=Za.firstChild,e=b.textContent||b.innerText||b.nodeValue||"",k="";e.length+k.length<a;)k+="\u00a0";k&&b.insertBefore(Ja.createTextNode(k),b.firstChild);fa.style.display="";L.style.marginLeft=fa.offsetWidth+"px";qa=!1}}function Rb(){var a=m.inverted?m.from:m.to;xa();var a=Wa(a,!0),b=T(S),l=T(ka);$a.style.top=a.y+l.top-b.top+"px";$a.style.left=a.x+l.left-b.left+"px";r(m.from,m.to)?(ta.style.top=a.y+"px",ta.style.left=(n.lineWrapping?Math.min(a.x,L.offsetWidth):a.x)+"px",ta.style.display=""):ta.style.display="none"}function Sb(a){ma=a?ma||(m.inverted?m.to:m.from):null}function Ea(a,b){var l=ma&&X(ma);l&&(ia(l,a)?a=l:ia(b,l)&&(b=l));Ta(a,b);hb=!0}function Ta(a,b,l,c){ib=null;null==l&&(l=m.from.line,c=m.to.line);if(!r(m.from,a)||!r(m.to,b)){if(ia(b,a)){var e=b;b=a;a=e}a.line!=l&&(a=jb(a,l,m.from.ch));b.line!=c&&(b=jb(b,c,m.to.ch));r(a,b)?m.inverted=!1:r(a,m.to)?m.inverted=!1:r(b,m.from)&&(m.inverted=!0);r(a,b)?r(m.from,m.to)||Z.push({from:l,to:c+1}):r(m.from,m.to)?Z.push({from:a.line,to:b.line+1}):(r(a,m.from)||(a.line<l?Z.push({from:a.line,to:Math.min(b.line,l)+1}):Z.push({from:l,to:Math.min(c,a.line)+1})),r(b,m.to)||(b.line<c?Z.push({from:Math.max(l,a.line),to:c+1}):Z.push({from:Math.max(a.line,c),to:b.line+1})));m.from=a;m.to=b;Fa=!0}}function jb(a,b,l){function c(b){for(var t=a.line+b,k=1==b?u.size:-1;t!=k;){var g=e(t);if(!g.hidden){b=a.ch;if(b>l||b>g.text.length)b=g.text.length;return{line:t,ch:b}}t+=b}}return e(a.line).hidden?a.line>=b?c(1)||c(-1):c(-1)||c(1):a}function Ga(a,b,l){a=X({line:a,ch:b||0});(l?Ea:Ta)(a,a)}function kb(a){return Math.max(0,Math.min(a,u.size-1))}function X(a){if(0>a.line)return{line:0,ch:0};if(a.line>=u.size)return{line:u.size-1,ch:e(u.size-1).text.length};var b=a.ch,l=e(a.line).text.length;return null==b||b>l?{line:a.line,ch:l}:0>b?{line:a.line,ch:0}:a}function Bb(a,b){function l(b){if(g==(0>a?0:d.text.length)){if(b=!b)a:{b=k+a;for(var l=0>a?-1:u.size;b!=l;b+=a){var c=e(b);if(!c.hidden){k=b;d=c;b=!0;break a}}b=void 0}if(b)g=0>a?d.text.length:0;else return!1}else g+=a;return!0}var c=m.inverted?m.from:m.to,k=c.line,g=c.ch,d=e(k);if("char"==b)l();else if("column"==b)l(!0);else if("word"==b)for(c=!1;!(0>a)||l();){if(Ma(d.text.charAt(g)))c=!0;else if(c){0>a&&(a=1,l());break}if(0<a&&!l())break}return{line:k,ch:g}}function Tb(a){for(var b=e(a.line).text,l=a.ch,c=a.ch;0<l&&Ma(b.charAt(l-1));)--l;for(;c<b.length&&Ma(b.charAt(c));)++c;Ea({line:a.line,ch:l},{line:a.line,ch:c})}function oc(a){Ea({line:a,ch:0},{line:a,ch:e(a).text.length})}function lb(a,b){b||(b="add");if("smart"==b)if(U.indent)var l=mb(a);else b="prev";var c=e(a),k=c.indentation(n.tabSize),g=c.text.match(/^\s*/)[0],d;"prev"==b?d=a?e(a-1).indentation(n.tabSize):0:"smart"==b?d=U.indent(l,c.text.slice(g.length),c.text):"add"==b?d=k+n.indentUnit:"subtract"==b&&(d=k-n.indentUnit);d=Math.max(0,d);if(d-k){k="";l=0;if(n.indentWithTabs)for(c=Math.floor(d/n.tabSize);c;--c)l+=n.tabSize,k+="\t";for(;l<d;)++l,k+=" "}else{if(m.from.line!=a&&m.to.line!=a)return;k=g}sa(k,{line:a,ch:0},{line:a,ch:g.length})}function Ub(){U=x.getMode(n,n.mode);u.iter(0,u.size,function(a){a.stateAfter=null});ra=[0];tb()}function pc(){var a=n.gutter||n.lineNumbers;fa.style.display=a?"":"none";a?qa=!0:ka.parentNode.style.marginLeft=0}function qc(a,b){if(n.lineWrapping){S.className+=" CodeMirror-wrap";var l=B.clientWidth/sb()-3;u.iter(0,u.size,function(a){if(!a.hidden){var b=Math.ceil(a.text.length/l)||1;1!=b&&k(a,b)}});L.style.width=ga.style.width=""}else S.className=S.className.replace(" CodeMirror-wrap",""),Ba=null,Aa="",u.iter(0,u.size,function(a){1==a.height||a.hidden||k(a,1);a.text.length>Aa.length&&(Aa=a.text)});Z.push({from:0,to:u.size})}function Vb(){for(var a='\x3cspan class\x3d"cm-tab"\x3e',b=0;b<n.tabSize;++b)a+=" ";return a+"\x3c/span\x3e"}function rc(){Ab=Vb();Xa(!0)}function Wb(){B.className=B.className.replace(/\s*cm-s-\w+/g,"")+n.theme.replace(/(^|\s)\s*/g," cm-s-")}function Cb(){this.set=[]}function Db(a,b,l){function c(a,b,z,l){e(a).addMark(new da(b,z,l,k.set))}a=X(a);b=X(b);var k=new Cb;if(a.line==b.line)c(a.line,a.ch,b.ch,l);else{c(a.line,a.ch,null,l);for(var g=a.line+1,d=b.line;g<d;++g)c(g,null,null,l);c(b.line,null,b.ch,l)}Z.push({from:a.line,to:b.line+1});return k}function Xb(a,b){var c=a,k=a;"number"==typeof a?k=e(kb(a)):c=w(a);if(null!=c&&b(k,c))Z.push({from:c,to:c+1});else return null;return k}function Yb(a,b){return Xb(a,function(a,z){if(a.hidden!=b)return a.hidden=b,k(a,b?0:1),!b||m.from.line!=z&&m.to.line!=z||Ta(jb(m.from,m.from.line,m.from.ch),jb(m.to,m.to.line,m.to.ch)),qa=!0})}function zb(a){Ha.innerHTML="\x3cpre\x3e\x3cspan\x3ex\x3c/span\x3e\x3c/pre\x3e";Ha.firstChild.firstChild.firstChild.nodeValue=a;return Ha.firstChild.firstChild.offsetWidth||10}function Zb(a,b){var c="";n.lineWrapping&&(c=a.text.indexOf(" ",b+2),c=la(a.text.slice(b+1,0>c?a.text.length:c+(Da?5:0))));Ha.innerHTML="\x3cpre\x3e"+a.getHTML(null,null,!1,Ab,b)+'\x3cspan id\x3d"CodeMirror-temp-'+$b+'"\x3e'+la(a.text.charAt(b)||" ")+"\x3c/span\x3e"+c+"\x3c/pre\x3e";var c=document.getElementById("CodeMirror-temp-"+$b),e=c.offsetTop,k=c.offsetLeft;Da&&b&&0==e&&0==k&&(e=document.createElement("span"),e.innerHTML="x",c.parentNode.insertBefore(e,c.nextSibling),e=e.offsetTop);return{top:e,left:k}}function Wa(a,b){var c,k=xa(),g=k*(O(u,a.line)-(b?Ya:0));if(0==a.ch)c=0;else{var d=Zb(e(a.line),a.ch);c=d.left;n.lineWrapping&&(g+=Math.max(0,d.top))}return{x:c,y:g,yBot:g+k}}function Eb(a,b){function c(a){a=Zb(m,a);return H?Math.max(0,a.left+(Math.round(a.top/k)-h)*B.clientWidth):a.left}0>b&&(b=0);var k=xa(),g=sb(),d=Ya+Math.floor(b/k),q=pa(u,d);if(q>=u.size)return{line:u.size-1,ch:e(u.size-1).text.length};var m=e(q),f=m.text,H=n.lineWrapping,h=H?d-O(u,q):0;if(0>=a&&0==h)return{line:q,ch:0};for(var v=d=0,f=f.length,p=Math.min(f,Math.ceil((a+h*B.clientWidth*.9)/g));;){var M=c(p);if(M<=a&&p<f)p=Math.min(f,Math.ceil(1.2*p));else{g=M;f=p;break}}if(a>g)return{line:q,ch:f};p=Math.floor(.8*f);M=c(p);M<a&&(d=p,v=M);for(;;){if(1>=f-d)return{line:q,ch:g-a>a-v?d:f};p=Math.ceil((d+f)/2);M=c(p);M>a?(f=p,g=M):(d=p,v=M)}}function ac(a){a=Wa(a,!0);var b=T(L);return{x:b.left+a.x,y:b.top+a.y,yBot:b.top+a.yBot}}function xa(){if(null==ab){ab="\x3cpre\x3e";for(var a=0;49>a;++a)ab+="x\x3cbr/\x3e";ab+="x\x3c/pre\x3e"}a=ka.clientHeight;if(a==bc)return Fb;bc=a;Ha.innerHTML=ab;Fb=Ha.firstChild.offsetHeight/50||1;Ha.innerHTML="";return Fb}function sb(){if(B.clientWidth==cc)return dc;cc=B.clientWidth;return dc=zb("x")}function Na(a,b){var c=T(B,!0),e,k;try{e=a.clientX,k=a.clientY}catch(g){return null}if(!b&&(e-c.left>B.clientWidth||k-c.top>B.clientHeight))return null;c=T(L,!0);return Eb(e-c.left,k-c.top)}function ec(a){function b(){var a=g(K.value).join("\n");a!=k&&A(Ua)(a,"end");$a.style.position="relative";K.style.cssText=e;Qa=!1;pb(!0);eb()}var c=Na(a);if(c&&!window.opera){(r(m.from,m.to)||ia(c,m.from)||!ia(c,m.to))&&A(Ga)(c.line,c.ch);var e=K.style.cssText;$a.style.position="absolute";K.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity\x3d5);";Qa=!0;var k=K.value=fb();Ia();K.select();if(Oa){N(a);var d=C(window,"mouseup",function(){d();setTimeout(b,20)},!0)}else setTimeout(b,50)}}function Kb(){clearInterval(qb);var a=!0;ta.style.visibility="";qb=setInterval(function(){ta.style.visibility=(a=!a)?"":"hidden"},650)}function fc(a){function b(a,c,z){if(a.text){var e=a.styles;a=q?0:a.text.length-1;for(var l,k=q?0:e.length-2,g=q?e.length:-2;k!=g;k+=2*f){var d=e[k];if(null!=e[k+1]&&e[k+1]!=v)a+=f*d.length;else for(var t=q?0:d.length-1,m=q?d.length:-1;t!=m;t+=f,a+=f)if(a>=c&&a<z&&M.test(l=d.charAt(t))){var H=Gb[l];if("\x3e"==H.charAt(1)==q)n.push(l);else{if(n.pop()!=H.charAt(0))return{pos:a,match:!1};if(!n.length)return{pos:a,match:!0}}}}}}var c=m.inverted?m.from:m.to,k=e(c.line),g=c.ch-1,d=0<=g&&Gb[k.text.charAt(g)]||Gb[k.text.charAt(++g)];if(d){d.charAt(0);for(var q="\x3e"==d.charAt(1),f=q?1:-1,H=k.styles,p=g+1,d=0,h=H.length;d<h;d+=2)if(0>=(p-=H[d].length)){var v=H[d+1];break}for(var n=[k.text.charAt(g)],M=/[(){}[\]]/,d=c.line,h=q?Math.min(d+100,u.size):Math.max(-1,d-100);d!=h;d+=f){var k=e(d),D=d==c.line;if(D=b(k,D&&q?g+1:0,D&&!q?g:k.text.length))break}D||(D={pos:null,match:!1});var v=D.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",r=Db({line:c.line,ch:g},{line:c.line,ch:g+1},v),T=null!=D.pos&&Db({line:d,ch:D.pos},{line:d,ch:D.pos+1},v),c=A(function(){r.clear();T&&T.clear()});a?setTimeout(c,800):nb=c}}function gc(a){var b,c,k=a;for(a-=40;k>a;--k){if(0==k)return 0;var g=e(k-1);if(g.stateAfter)return k;g=g.indentation(n.tabSize);if(null==c||b>g)c=k-1,b=g}return c}function mb(a){var b=gc(a),c=b&&e(b-1).stateAfter,c=c?G(U,c):I(U);u.iter(b,a,function(a){a.highlight(U,c,n.tabSize);a.stateAfter=G(U,c)});b<a&&Z.push({from:b,to:a});a<u.size&&!e(a).stateAfter&&ra.push(a);return c}function kc(a,b){var c=mb(a);u.iter(a,b,function(a){a.highlight(U,c,n.tabSize);a.stateAfter=G(U,c)})}function sc(){for(var a=+new Date+n.workTime,b=ra.length;ra.length;){var c=e(aa).stateAfter?ra.pop():aa;if(!(c>=u.size)){var k=gc(c),g=k&&e(k-1).stateAfter,g=g?G(U,g):I(U),d=0,q=U.compareStates,m=!1,f=k,H=!1;u.iter(f,u.size,function(b){var e=b.stateAfter;if(+new Date>a)return ra.push(f),tb(n.workDelay),m&&Z.push({from:c,to:f+1}),H=!0;var k=b.highlight(U,g,n.tabSize);k&&(m=!0);b.stateAfter=G(U,g);if(q){if(e&&q(e,g))return!0}else if(!1!==k||!e)d=0;else if(3<++d&&(!U.indent||U.indent(e,"")==U.indent(g,"")))return!0;++f});if(H)return;m&&Z.push({from:c,to:f+1})}}if(b&&n.onHighlightComplete)n.onHighlightComplete(R)}function tb(a){ra.length&&tc.set(a,A(sc))}function wb(){za=hb=Sa=null;Z=[];Fa=!1;Ra=[]}function xb(){var a=!1,b;Fa&&(a=!Mb());Z.length?b=Xa(Z,!0):(Fa&&Rb(),qa&&Qb());a&&Mb();Fa&&(lc(),Kb());na&&!Qa&&(!0===za||!1!==za&&Fa)&&pb(hb);Fa&&n.matchBrackets&&setTimeout(A(function(){nb&&(nb(),nb=null);r(m.from,m.to)&&fc(!1)}),20);var c=Sa,a=Ra;if(Fa&&n.onCursorActivity)n.onCursorActivity(R);if(c&&n.onChange&&R)n.onChange(R,c);for(c=0;c<a.length;++c)a[c](R);if(b&&n.onUpdate)n.onUpdate(R)}function A(a){return function(){hc++||wb();try{var b=a.apply(this,arguments)}finally{--hc||xb()}return b}}var n={},Hb=x.defaults,bb;for(bb in Hb)Hb.hasOwnProperty(bb)&&(n[bb]=(b&&b.hasOwnProperty(bb)?b:Hb)[bb]);var Ja=n.document,S=Ja.createElement("div");S.className="CodeMirror"+(n.lineWrapping?" CodeMirror-wrap":"");S.innerHTML='\x3cdiv style\x3d"overflow: hidden; position: relative; width: 3px; height: 0px;"\x3e\x3ctextarea style\x3d"position: absolute; padding: 0; width: 1px;" wrap\x3d"off" autocorrect\x3d"off" autocapitalize\x3d"off"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"CodeMirror-scroll" tabindex\x3d"-1"\x3e\x3cdiv style\x3d"position: relative"\x3e\x3cdiv style\x3d"position: relative"\x3e\x3cdiv class\x3d"CodeMirror-gutter"\x3e\x3cdiv class\x3d"CodeMirror-gutter-text"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"CodeMirror-lines"\x3e\x3cdiv style\x3d"position: relative"\x3e\x3cdiv style\x3d"position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"\x3e\x3c/div\x3e\x3cpre class\x3d"CodeMirror-cursor"\x3e\x26#160;\x3c/pre\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e';a.appendChild?a.appendChild(S):a(S);var $a=S.firstChild,K=$a.firstChild,B=S.lastChild,ga=B.firstChild,gb=ga.firstChild,fa=gb.firstChild,Za=fa.firstChild,L=fa.nextSibling.firstChild,Ha=L.firstChild,ta=Ha.nextSibling,ka=ta.nextSibling;Wb();/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)&&(K.style.width="0px");E||(L.draggable=!0);null!=n.tabindex&&(K.tabIndex=n.tabindex);n.gutter||n.lineNumbers||(fa.style.display="none");try{zb("x")}catch(z){throw z.message.match(/runtime/i)&&(z=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),z;}var vb=new p,tc=new p,qb,U,u=new f([new d([new F("")])]),ra,na;Ub();var m={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},ma,ob,cb,Ib,yb=!1,za,hb,Z,Sa,Fa,Qa,qa,Ra,Ya=0,aa=0,ja=0,Pb=0,nb,Aa="",Ba,Ab=Vb();A(function(){q(n.value||"");za=!1})();var oa=new J;C(B,"mousedown",A(function(a){function b(a){var c=Na(a,!0);if(c&&!r(c,k)){na||h();k=c;Ea(e,c);za=!1;var z=Ob();if(c.line>=z.to||c.line<z.from)g=setTimeout(A(function(){b(a)}),150)}}Sb(a.shiftKey);for(var c=a.target||a.srcElement;c!=S;c=c.parentNode)if(c.parentNode==ga&&c!=gb)return;for(c=a.target||a.srcElement;c!=S;c=c.parentNode)if(c.parentNode==Za){if(n.onGutterClick)n.onGutterClick(R,ua(Za.childNodes,c)+aa,a);return y(a)}var e=Na(a);switch(V(a)){case 3:Oa&&!Ka&&ec(a);return;case 2:e&&Ga(e.line,e.ch,!0);return}if(e){na||h();c=+new Date;if(cb&&cb.time>c-400&&r(cb.pos,e))return y(a),setTimeout(Ia,20),oc(e.line);if(ob&&ob.time>c-400&&r(ob.pos,e))return cb={time:c,pos:e},y(a),Tb(e);ob={time:c,pos:e};var k=e,g;if(!ya||r(m.from,m.to)||ia(e,m.from)||ia(m.to,e)){y(a);Ga(e.line,e.ch,!0);var d=C(Ja,"mousemove",A(function(a){clearTimeout(g);y(a);b(a)}),!0),q=C(Ja,"mouseup",A(function(a){clearTimeout(g);var b=Na(a);b&&Ea(e,b);y(a);Ia();za=!0;d();q()}),!0)}else{E&&(L.draggable=!0);var q=C(Ja,"mouseup",A(function(b){E&&(L.draggable=!1);Ib=!1;q();10>Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)&&(y(b),Ga(e.line,e.ch,!0),Ia())}),!0);Ib=!0}}else(a.target||a.srcElement)==B&&y(a)}));C(B,"dblclick",A(function(a){for(var b=a.target||a.srcElement;b!=S;b=b.parentNode)if(b.parentNode==Za)return y(a);if(b=Na(a))cb={time:+new Date,pos:b},y(a),Tb(b)}));C(L,"dragstart",function(a){var b=fb();la(b);a.dataTransfer.setDragImage(va,0,0);a.dataTransfer.setData("Text",b)});C(L,"selectstart",y);Oa||C(B,"contextmenu",ec);C(B,"scroll",function(){Xa([]);n.fixedGutter&&(fa.style.left=B.scrollLeft+"px");if(n.onScroll)n.onScroll(R)});C(window,"resize",function(){Xa(!0)});C(K,"keyup",A(function(a){n.onKeyEvent&&n.onKeyEvent(R,ba(a))||16==a.keyCode&&(ma=null)}));C(K,"input",Va);C(K,"keydown",A(function(a){na||h();var b=a.keyCode;Da&&27==b&&(a.returnValue=!1);Sb(16==b||a.shiftKey);n.onKeyEvent&&n.onKeyEvent(R,ba(a))||(b=H(a),window.opera&&(Jb=b?a.keyCode:null,!b&&(Ka?a.metaKey:a.ctrlKey)&&88==a.keyCode&&Ua("")))}));C(K,"keypress",A(function(a){window.opera&&a.keyCode==Jb?(Jb=null,y(a)):n.onKeyEvent&&n.onKeyEvent(R,ba(a))||window.opera&&!a.which&&H(a)||(n.electricChars&&U.electricChars&&(a=String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),-1<U.electricChars.indexOf(a)&&setTimeout(A(function(){lb(m.to.line,"smart")}),75)),Va())}));C(K,"focus",h);C(K,"blur",D);C(B,"dragenter",N);C(B,"dragover",N);C(B,"drop",A(function(a){a.preventDefault();var b=Na(a,!0),c=a.dataTransfer.files;if(b&&!n.readOnly)if(c&&c.length&&window.FileReader&&window.File){a=function(a,c){var l=new FileReader;l.onload=function(){k[c]=l.result;++g==e&&(b=X(b),A(function(){var a=sa(k.join(""),b,b);Ea(b,a)})())};l.readAsText(a)};for(var e=c.length,k=Array(e),g=0,d=0;d<e;++d)a(c[d],d)}else try{if(k=a.dataTransfer.getData("Text")){var d=sa(k,b,b),q=m.from,f=m.to;Ea(b,d);Ib&&sa("",q,f);Ia()}}catch(H){}}));C(B,"paste",function(){Ia();Va()});C(K,"paste",Va);C(K,"cut",A(function(){Ua("")}));var ic;try{ic=Ja.activeElement==K}catch(z){}ic?setTimeout(h,20):D();var R=S.CodeMirror={getValue:function(a){var b=[];u.iter(0,u.size,function(a){b.push(a.text)});return b.join("\n")},setValue:A(q),getSelection:fb,replaceSelection:A(Ua),focus:function(){Ia();h();Va()},setOption:function(a,b){var c=n[a];n[a]=b;"mode"==a||"indentUnit"==a?Ub():"readOnly"==a&&b?(D(),K.blur()):"theme"==a?Wb():"lineWrapping"==a&&c!=b?A(qc)():"tabSize"==a&&A(rc)();"lineNumbers"!=a&&"gutter"!=a&&"firstLineNumber"!=a&&"theme"!=a||A(pc)()},getOption:function(a){return n[a]},undo:A(function(){W(oa.done,oa.undone)}),redo:A(function(){W(oa.undone,oa.done)}),indentLine:A(function(a,b){c(a)&&lb(a,null==b?"smart":b?"add":"subtract")}),indentSelection:A(function(a){if(r(m.from,m.to))return lb(m.from.line,a);for(var b=m.to.line-(m.to.ch?0:1),c=m.from.line;c<=b;++c)lb(c,a)}),historySize:function(){return{undo:oa.done.length,redo:oa.undone.length}},clearHistory:function(){oa=new J},matchBrackets:A(function(){fc(!0)}),getTokenAt:A(function(a){a=X(a);return e(a.line).getTokenAt(U,mb(a.line),a.ch)}),getStateAfter:function(a){a=kb(null==a?u.size-1:a);return mb(a+1)},cursorCoords:function(a){null==a&&(a=m.inverted);return ac(a?m.from:m.to)},charCoords:function(a){return ac(X(a))},coordsChar:function(a){var b=T(L);return Eb(a.x-b.left,a.y-b.top)},markText:A(Db),setBookmark:function(a){a=X(a);var b=new Y(a.ch);e(a.line).addMark(b);return b},setMarker:A(function(a,b,c){"number"==typeof a&&(a=e(kb(a)));a.gutterMarker={text:b,style:c};qa=!0;return a}),clearMarker:A(function(a){"number"==typeof a&&(a=e(kb(a)));a.gutterMarker=null;qa=!0}),setLineClass:A(function(a,b){return Xb(a,function(a){if(a.className!=b)return a.className=b,!0})}),hideLine:A(function(a){return Yb(a,!0)}),showLine:A(function(a){return Yb(a,!1)}),onDeleteLine:function(a,b){if("number"==typeof a){if(!c(a))return null;a=e(a)}(a.handlers||(a.handlers=[])).push(b);return a},lineInfo:function(a){if("number"==typeof a){if(!c(a))return null;var b=a;a=e(a);if(!a)return null}else if(b=w(a),null==b)return null;var k=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:k&&k.text,markerClass:k&&k.style,lineClass:a.className}},addWidget:function(a,b,c,e,k){a=Wa(X(a));var g=a.yBot,d=a.x;b.style.position="absolute";ga.appendChild(b);if("over"==e)g=a.y;else if("near"==e){e=Math.max(B.offsetHeight,u.height*xa());var q=Math.max(ga.clientWidth,L.clientWidth)-L.offsetLeft;a.yBot+b.offsetHeight>e&&a.y>b.offsetHeight&&(g=a.y-b.offsetHeight);d+b.offsetWidth>q&&(d=q-b.offsetWidth)}b.style.top=g+L.offsetTop+"px";b.style.left=b.style.right="";"right"==k?(d=ga.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==k?d=0:"middle"==k&&(d=(ga.clientWidth-b.offsetWidth)/2),b.style.left=d+L.offsetLeft+"px");c&&Nb(d,g,d+b.offsetWidth,g+b.offsetHeight)},lineCount:function(){return u.size},clipPos:X,getCursor:function(a){null==a&&(a=m.inverted);a=a?m.from:m.to;return{line:a.line,ch:a.ch}},somethingSelected:function(){return!r(m.from,m.to)},setCursor:A(function(a,b,c){null==b&&"number"==typeof a.line?Ga(a.line,a.ch,c):Ga(a,b,c)}),setSelection:A(function(a,b,c){(c?Ea:Ta)(X(a),X(b||a))}),getLine:function(a){if(c(a))return e(a).text},getLineHandle:function(a){if(c(a))return e(a)},setLine:A(function(a,b){c(a)&&sa(b,{line:a,ch:0},{line:a,ch:e(a).text.length})}),removeLine:A(function(a){c(a)&&sa("",{line:a,ch:0},X({line:a+1,ch:0}))}),replaceRange:A(sa),getRange:function(a,b){return Lb(X(a),X(b))},execCommand:function(a){return La[a](R)},moveH:A(function(a,b){var c=0>a?m.from:m.to;if(ma||r(m.from,m.to))c=Bb(a,b);Ga(c.line,c.ch,!0)}),deleteH:A(function(a,b){r(m.from,m.to)?0>a?sa("",Bb(a,b),m.to):sa("",m.from,Bb(a,b)):sa("",m.from,m.to);hb=!0}),moveV:A(function(a,b){var c=0,e=Wa(m.inverted?m.from:m.to,!0);null!=ib&&(e.x=ib);"page"==b?c=B.clientHeight:"line"==b&&(c=xa());c=Eb(e.x,e.y+c*a+2);Ga(c.line,c.ch,!0);ib=e.x}),toggleOverwrite:function(){yb=!yb},posFromIndex:function(a){var b=0,c;u.iter(0,u.size,function(e){e=e.text.length+1;if(e>a)return c=a,!0;a-=e;++b});return X({line:b,ch:c})},indexFromPos:function(a){if(0>a.line||0>a.ch)return 0;var b=a.ch;u.iter(0,a.line,function(a){b+=a.text.length+1});return b},operation:function(a){return A(a)()},refresh:function(){Xa(!0)},getInputField:function(){return K},getWrapperElement:function(){return S},getScrollerElement:function(){return B},getGutterElement:function(){return fa}},Jb=null,ub=!1,Ca="",ib=null;Cb.prototype.clear=A(function(){for(var a=Infinity,b=-Infinity,c=0,e=this.set.length;c<e;++c){var k=this.set[c],g=k.marked;if(g&&k.parent)for(k=w(k),a=Math.min(a,k),b=Math.max(b,k),k=0;k<g.length;++k)g[k].set==this.set&&g.splice(k--,1)}Infinity!=a&&Z.push({from:a,to:b+1})});Cb.prototype.find=function(){for(var a,b,c=0,e=this.set.length;c<e;++c)for(var k=this.set[c],g=k.marked,d=0;d<g.length;++d){var q=g[d];if(q.set==this.set&&(null!=q.from||null!=q.to)){var m=w(k);null!=m&&(null!=q.from&&(a={line:m,ch:q.from}),null!=q.to&&(b={line:m,ch:q.to}))}}return{from:a,to:b}};var $b=Math.floor(16777215*Math.random()).toString(16),Fb,bc,ab,dc,cc=0,Gb={"(":")\x3e",")":"(\x3c","[":"]\x3e","]":"[\x3c","{":"}\x3e","}":"{\x3c"},hc=0,db;for(db in Pa)Pa.propertyIsEnumerable(db)&&!R.propertyIsEnumerable(db)&&(R[db]=Pa[db]);return R}function Q(a,b,c){function e(a,b,c){var g=b[a];if(null!=g)return g;null==c&&(c=b.fallthrough);if(null==c)return b.catchall;if("string"==typeof c)return e(a,ca[c]);b=0;for(var d=c.length;b<d;++b)if(g=e(a,ca[c[b]]),null!=g)return g;return null}return b?e(a,b,c):e(a,ca[c])}function G(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},e;for(e in b){var k=b[e];k instanceof Array&&(k=k.concat([]));c[e]=k}return c}function I(a,b,c){return a.startState?a.startState(b,c):!0}function W(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8}function da(a,b,c,e){this.from=a;this.to=b;this.style=c;this.set=e}function Y(a){this.to=this.from=a;this.line=null}function F(a,b){this.styles=b||[a,null];this.text=a;this.height=1;this.stateAfter=this.parent=this.hidden=this.marked=this.gutterMarker=this.className=this.handlers=null}function h(a,b,c,e){for(var k=0,g=0,d=0;g<b;k+=2){var f=c[k],p=g+f.length;0==d?(p>a&&e.push(f.slice(a-g,Math.min(f.length,b-g)),c[k+1]),p>=a&&(d=1)):1==d&&(p>b?e.push(f.slice(0,b-g),c[k+1]):e.push(f,c[k+1]));g=p}}function d(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,e=0;b<c;++b)a[b].parent=this,e+=a[b].height;this.height=e}function f(a){this.children=a;for(var b=0,c=0,e=0,k=a.length;e<k;++e){var g=a[e],b=b+g.chunkSize(),c=c+g.height;g.parent=this}this.size=b;this.height=c;this.parent=null}function w(a){if(null==a.parent)return null;var b=a.parent;a=ua(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var e=0;c.children[e]!=b;++e)a+=c.children[e].chunkSize();return a}function pa(a,b){var c=0;a:do{for(var e=0,k=a.children.length;e<k;++e){var g=a.children[e],d=g.height;if(b<d){a=g;continue a}b-=d;c+=g.chunkSize()}return c}while(!a.lines);e=0;for(k=a.lines.length;e<k;++e){g=a.lines[e].height;if(b<g)break;b-=g}return c+e}function O(a,b){var c=0;a:do{for(var e=0,k=a.children.length;e<k;++e){var g=a.children[e],d=g.chunkSize();if(b<d){a=g;continue a}b-=d;c+=g.height}return c}while(!a.lines);for(e=0;e<b;++e)c+=a.lines[e].height;return c}function J(){this.time=0;this.done=[];this.undone=[]}function P(){N(this)}function ba(a){a.stop||(a.stop=P);return a}function y(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function ha(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function N(a){y(a);ha(a)}function V(a){if(a.which)return a.which;if(a.button&1)return 1;if(a.button&2)return 3;if(a.button&4)return 2}function C(a,b,c,e){if("function"==typeof a.addEventListener){if(a.addEventListener(b,c,!1),e)return function(){a.removeEventListener(b,c,!1)}}else{var k=function(a){c(a||window.event)};a.attachEvent("on"+b,k);if(e)return function(){a.detachEvent("on"+b,k)}}}function p(){this.id=null}function D(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var e=0,k=0;e<b;++e)"\t"==a.charAt(e)?k+=c-k%c:++k;return k}function T(a,b){for(var c=a.ownerDocument.body,e=0,k=0,g=!1,d=a;d;d=d.offsetParent){var f=d.offsetLeft,p=d.offsetTop;d==c?(e+=Math.abs(f),k+=Math.abs(p)):(e+=f,k+=p);if(f=b)f=d.currentStyle?d.currentStyle:window.getComputedStyle(d,null),f="fixed"==f.position;f&&(g=!0)}c=b&&!g?null:c;for(d=a.parentNode;d!=c;d=d.parentNode)null!=d.scrollLeft&&(e-=d.scrollLeft,k-=d.scrollTop);return{left:e,top:k}}function r(a,b){return a.line==b.line&&a.ch==b.ch}function ia(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function la(a){va.textContent=a;return va.innerHTML}function rb(a,b){if(!b)return a?a.length:0;if(!a)return b.length;for(var c=a.length,e=b.length;0<=c&&0<=e&&a.charAt(c)==b.charAt(e);--c,--e);return e+1}function ua(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,e=a.length;c<e;++c)if(a[c]==b)return c;return-1}function Ma(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()}x.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var Ka=/Mac/.test(navigator.platform);/Win/.test(navigator.platform);var wa={},ea={};x.defineMode=function(a,b){x.defaults.mode||"null"==a||(x.defaults.mode=a);wa[a]=b};x.defineMIME=function(a,b){ea[a]=b};x.getMode=function(a,b){"string"==typeof b&&ea.hasOwnProperty(b)&&(b=ea[b]);if("string"==typeof b)var c=b,e={};else null!=b&&(c=b.name,e=b);var k=wa[c];return k?k(a,e||{}):(window.console&&console.warn("No mode "+c+" found, falling back to plain text."),x.getMode(a,"text/plain"))};x.listModes=function(){var a=[],b;for(b in wa)wa.propertyIsEnumerable(b)&&a.push(b);return a};x.listMIMEs=function(){var a=[],b;for(b in ea)ea.propertyIsEnumerable(b)&&a.push({mime:b,mode:ea[b]});return a};var Pa=x.extensions={};x.defineExtension=function(a,b){Pa[a]=b};var La=x.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),e=!r(b,c);e||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,e?c:{line:b.line}):a.replaceRange("",b,{line:b.line+1,ch:0})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),c=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=c&&b.ch?0:c,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end");a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},ca=x.keyMap={};ca.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};ca.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"};ca.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]};ca["default"]=Ka?ca.macDefault:ca.pcDefault;ca.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};x.fromTextArea=function(a,b){function c(){a.value=d.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);if(a.form){var e=C(a.form,"submit",c,!0);if("function"==typeof a.form.submit){var k=function(){c();a.form.submit=g;a.form.submit();a.form.submit=k},g=a.form.submit;a.form.submit=k}}a.style.display="none";var d=x(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);d.save=c;d.getTextArea=function(){return a};d.toTextArea=function(){c();a.parentNode.removeChild(d.getWrapperElement());a.style.display="";a.form&&(e(),"function"==typeof a.form.submit&&(a.form.submit=g))};return d};x.copyState=G;x.startState=I;W.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){return D(this.string,this.start,this.tabSize)},indentation:function(){return D(this.string,null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){var e=function(a){return c?a.toLowerCase():a};if(e(this.string).indexOf(e(a),this.pos)==this.pos)return!1!==b&&(this.pos+=a.length),!0}else return(a=this.string.slice(this.pos).match(a))&&!1!==b&&(this.pos+=a[0].length),a},current:function(){return this.string.slice(this.start,this.pos)}};x.StringStream=W;da.prototype={attach:function(a){this.set.push(a)},detach:function(a){a=ua(this.set,a);-1<a&&this.set.splice(a,1)},split:function(a,b){return this.to<=a&&null!=this.to?null:new da(this.from<a||null==this.from?null:this.from-a+b,null==this.to?null:this.to-a+b,this.style,this.set)},dup:function(){return new da(null,null,this.style,this.set)},clipTo:function(a,b,c,e,k){null!=this.from&&this.from>=b&&(this.from=Math.max(e,this.from)+k);null!=this.to&&this.to>b&&(this.to=e<this.to?this.to+k:b);a&&e>this.from&&(e<this.to||null==this.to)&&(this.from=null);c&&(b<this.to||null==this.to)&&(b>this.from||null==this.from)&&(this.to=null)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(a){return this.set==a.set}};Y.prototype={attach:function(a){this.line=a},detach:function(a){this.line==a&&(this.line=null)},split:function(a,b){if(a<this.from)return this.from=this.to=this.from-a+b,this},isDead:function(){return this.from>this.to},clipTo:function(a,b,c,e,k){(a||b<this.from)&&(c||e>this.to)?(this.from=0,this.to=-1):this.from>b&&(this.from=this.to=Math.max(e,this.from)+k)},sameSet:function(a){return!1},find:function(){return this.line&&this.line.parent?{line:w(this.line),ch:this.from}:null},clear:function(){if(this.line){var a=ua(this.line.marked,this);-1!=a&&this.line.marked.splice(a,1);this.line=null}}};F.inheritMarks=function(a,b){var c=new F(a),e=b&&b.marked;if(e)for(var k=0;k<e.length;++k)if(null==e[k].to&&e[k].style){var g=c.marked||(c.marked=[]),d=e[k].dup();g.push(d);d.attach(c)}return c};F.prototype={replace:function(a,b,c){var e=[],k=this.marked,g=null==b?this.text.length:b;h(0,a,this.styles,e);c&&e.push(c,null);h(g,this.text.length,this.styles,e);this.styles=e;this.text=this.text.slice(0,a)+c+this.text.slice(g);this.stateAfter=null;if(k){c=c.length-(g-a);for(var e=0,d=k[e];e<k.length;++e)d.clipTo(null==a,a||0,null==b,g,c),d.isDead()&&(d.detach(this),k.splice(e--,1))}},split:function(a,b){var c=[b,null],e=this.marked;h(a,this.text.length,this.styles,c);c=new F(b+this.text.slice(a),c);if(e)for(var k=0;k<e.length;++k){var g=e[k].split(a,b.length);g&&(c.marked||(c.marked=[]),c.marked.push(g),g.attach(c))}return c},append:function(a){var b=this.text.length,c=a.marked,e=this.marked;this.text+=a.text;h(0,a.text.length,a.styles,this.styles);if(e)for(a=0;a<e.length;++a)null==e[a].to&&(e[a].to=b);if(c&&c.length)a:for(e||(this.marked=e=[]),a=0;a<c.length;++a){var g=c[a];if(!g.from)for(var d=0;d<e.length;++d){var f=e[d];if(f.to==b&&f.sameSet(g)){f.to=null==g.to?null:g.to+b;f.isDead()&&(f.detach(this),c.splice(a--,1));continue a}}e.push(g);g.attach(this);g.from+=b;null!=g.to&&(g.to+=b)}},fixMarkEnds:function(a){var b=this.marked;a=a.marked;if(b)for(var c=0;c<b.length;++c){var e=b[c],g=null==e.to;if(g&&a)for(var d=0;d<a.length;++d)if(a[d].sameSet(e)){g=!1;break}g&&(e.to=this.text.length)}},fixMarkStarts:function(){var a=this.marked;if(a)for(var b=0;b<a.length;++b)null==a[b].from&&(a[b].from=0)},addMark:function(a){a.attach(this);null==this.marked&&(this.marked=[]);this.marked.push(a);this.marked.sort(function(a,c){return(a.from||0)-(c.from||0)})},highlight:function(a,b,c){c=new W(this.text,c);var e=this.styles,g=0,d=!1,f=e[0],p;for(""==this.text&&a.blankLine&&a.blankLine(b);!c.eol();){var h=a.token(c,b),v=this.text.slice(c.start,c.pos);c.start=c.pos;g&&e[g-1]==h?e[g-2]+=v:v&&(!d&&(e[g+1]!=h||g&&e[g-2]!=p)&&(d=!0),e[g++]=v,e[g++]=h,p=f,f=e[g]);if(5E3<c.pos){e[g++]=this.text.slice(c.pos);e[g++]=null;break}}e.length!=g&&(e.length=g,d=!0);g&&e[g-2]!=p&&(d=!0);return d||(5>e.length&&10>this.text.length?null:!1)},getTokenAt:function(a,b,c){for(var e=new W(this.text);e.pos<c&&!e.eol();){e.start=e.pos;var g=a.token(e,b)}return{start:e.start,end:e.pos,string:e.current(),className:g||null,state:b}},indentation:function(a){return D(this.text,null,a)},getHTML:function(a,b,c,e,g){function d(a,b){a&&(p&&Da&&" "==a.charAt(0)&&(a="\u00a0"+a.slice(1)),p=!1,b?f.push('\x3cspan class\x3d"',b,'"\x3e',la(a).replace(/\t/g,e),"\x3c/span\x3e"):f.push(la(a).replace(/\t/g,e)))}var f=[],p=!0;c&&f.push(this.className?'\x3cpre class\x3d"'+this.className+'"\x3e':"\x3cpre\x3e");var h=this.styles,v=this.text,M=this.marked;a==b&&(a=null);var D=v.length;null!=g&&(D=Math.min(g,D));if(v||null!=g)if(M||null!=a){var v=function(){M&&(x+=1,y=x<M.length?M[x]:null)},r=0;g=0;var T="",x=-1,y=null;for(v();r<D;){var w=D,C="";if(null!=a)if(a>r)w=a;else if(null==b||b>r)C=" CodeMirror-selected",null!=b&&(w=Math.min(w,b));for(;y&&null!=y.to&&y.to<=r;)v();y&&(y.from>r?w=Math.min(w,y.from):(C+=" "+y.style,null!=y.to&&(w=Math.min(w,y.to))));for(;;){var F=r+T.length,G=E;C&&(G=E?E+C:C);d(F>w?T.slice(0,w-r):T,G);if(F>=w){T=T.slice(w-r);r=w;break}r=F;T=h[g++];E="cm-"+h[g++]}}null!=a&&null==b&&d(" ","CodeMirror-selected")}else for(a=g=0;a<D;g+=2){b=h[g];var E=h[g+1],v=b.length;a+v>D&&(b=b.slice(0,D-a));a+=v;d(b,E&&"cm-"+E)}else d(" ",null!=a&&null==b?"CodeMirror-selected":null);c&&f.push("\x3c/pre\x3e");return f.join("")},cleanUp:function(){this.parent=null;if(this.marked)for(var a=0,b=this.marked.length;a<b;++a)this.marked[a].detach(this)}};d.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var e=a,g=a+b;e<g;++e){var d=this.lines[e];this.height-=d.height;d.cleanUp();if(d.handlers)for(var f=0;f<d.handlers.length;++f)c.push(d.handlers[f])}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines.splice.apply(this.lines,[a,0].concat(b));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};f.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var e=0;e<this.children.length;++e){var g=this.children[e],f=g.chunkSize();if(a<f){var p=Math.min(b,f-a),v=g.height;g.remove(a,p,c);this.height-=v-g.height;f==p&&(this.children.splice(e--,1),g.parent=null);if(0==(b-=p))break;a=0}else a-=f}25>this.size-b&&(a=[],this.collapse(a),this.children=[new d(a)])},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){for(var c=0,g=0,d=b.length;g<d;++g)c+=b[g].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length;this.height+=c;for(var g=0,k=this.children.length;g<k;++g){var f=this.children[g],p=f.chunkSize();if(a<=p){f.insertHeight(a,b,c);if(f.lines&&50<f.lines.length){for(;50<f.lines.length;)a=f.lines.splice(f.lines.length-25,25),a=new d(a),f.height-=a.height,this.children.splice(g+1,0,a),a.parent=this;this.maybeSpill()}break}a-=p}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new f(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=ua(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new f(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var g=0,d=this.children.length;g<d;++g){var f=this.children[g],p=f.chunkSize();if(a<p){p=Math.min(b,p-a);if(f.iterN(a,p,c))return!0;if(0==(b-=p))break;a=0}else a-=p}}};J.prototype={addChange:function(a,b,c){this.undone.length=0;var g=+new Date,d=this.done[this.done.length-1];if(400<g-this.time||!d||d.start>a+b||d.start+d.added<a-d.added+d.old.length)this.done.push({start:a,added:b,old:c});else{var f=0;if(a<d.start){for(var p=d.start-a-1;0<=p;--p)d.old.unshift(c[p]);d.added+=d.start-a;d.start=a}else d.start<a&&(f=a-d.start,b+=f);p=d.added-f;for(a=c.length;p<a;++p)d.old.push(c[p]);d.added<b&&(d.added=b)}this.time=g}};x.e_stop=N;x.e_preventDefault=y;x.e_stopPropagation=ha;x.connect=C;p.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};var ya=/MSIE [1-8]\b/.test(navigator.userAgent)?!1:"draggable"in document.createElement("div"),Oa=/gecko\/\d{7}/i.test(navigator.userAgent),Da=/MSIE \d/.test(navigator.userAgent),E=/WebKit\//.test(navigator.userAgent);(function(){var a=document.createElement("textarea");a.value="foo\nbar";a.value.indexOf("\r")})();null!=document.documentElement.getBoundingClientRect&&(T=function(a,b){try{var c=a.getBoundingClientRect(),c={top:c.top,left:c.left}}catch(g){c={top:0,left:0}}if(!b)if(null==window.pageYOffset){var e=document.documentElement||document.body.parentNode;null==e.scrollTop&&(e=document.body);c.top+=e.scrollTop;c.left+=e.scrollLeft}else c.top+=window.pageYOffset,c.left+=window.pageXOffset;return c});var va=document.createElement("pre");"\na"==la("a")?la=function(a){va.textContent=a;return va.innerHTML.slice(1)}:"\t"!=la("\t")&&(la=function(a){va.innerHTML="";va.appendChild(document.createTextNode(a));return va.innerHTML});x.htmlEscape=la;var g=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c,g=[];-1<(c=a.indexOf("\n",b));)g.push(a.slice(b,"\r"==a.charAt(c-1)?c-1:c)),b=c+1;g.push(a.slice(b));return g}:function(a){return a.split(/\r?\n/)};x.splitLines=g;var M=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1};x.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});x.defineMIME("text/plain","null");var v={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};x.keyNames=v;(function(){for(var a=0;10>a;a++)v[a+48]=String(a);for(a=65;90>=a;a++)v[a]=String.fromCharCode(a);for(a=1;12>=a;a++)v[a+111]=v[a+63235]="F"+a})();return x}();CodeMirror.defineMode("xml",function(x,Q){function G(d,f){function h(r){f.tokenize=r;return r(d,f)}var r=d.next();if("\x3c"==r){if(d.eat("!"))return d.eat("[")?d.match("CDATA[")?h(da("atom","]]\x3e")):null:d.match("--")?h(da("comment","--\x3e")):d.match("DOCTYPE",!0,!0)?(d.eatWhile(/[\w\._\-]/),h(Y(1))):null;if(d.eat("?"))return d.eatWhile(/[\w\._\-]/),f.tokenize=da("meta","?\x3e"),"meta";N=d.eat("/")?"closeTag":"openTag";d.eatSpace();for(ha="";r=d.eat(/[^\s\u00a0=<>\"\'\/?]/);)ha+=r;f.tokenize=I;return"tag"}if("\x26"==r)return d.eatWhile(/[^;]/),d.eat(";"),"atom";d.eatWhile(/[^&<]/);return null}function I(d,f){var h=d.next();if("\x3e"==h||"/"==h&&d.eat("\x3e"))return f.tokenize=G,N="\x3e"==h?"endTag":"selfcloseTag","tag";if("\x3d"==h)return N="equals",null;if(/[\'\"]/.test(h))return f.tokenize=W(h),f.tokenize(d,f);d.eatWhile(/[^\s\u00a0=<>\"\'\/?]/);return"word"}function W(d){return function(f,h){for(;!f.eol();)if(f.next()==d){h.tokenize=I;break}return"string"}}function da(d,f){return function(h,r){for(;!h.eol();){if(h.match(f)){r.tokenize=G;break}h.next()}return d}}function Y(d){return function(f,h){for(var r;null!=(r=f.next());){if("\x3c"==r)return h.tokenize=Y(d+1),h.tokenize(f,h);if("\x3e"==r)if(1==d){h.tokenize=G;break}else return h.tokenize=Y(d-1),h.tokenize(f,h)}return"meta"}}function F(){for(var d=arguments.length-1;0<=d;d--)V.cc.push(arguments[d])}function h(){F.apply(null,arguments);return!0}function d(d){return"openTag"==d?(V.tagName=ha,h(pa,f(V.startOfLine))):"closeTag"==d?((d=V.context?V.context.tagName!=ha:!0)&&(C="error"),h(w(d))):h()}function f(d){return function(f){if("selfcloseTag"==f||"endTag"==f&&ba.autoSelfClosers.hasOwnProperty(V.tagName.toLowerCase()))return h();if("endTag"==f){f=V.tagName;var w=ba.doNotIndent.hasOwnProperty(f)||V.context&&V.context.noIndent;V.context={prev:V.context,tagName:f,indent:V.indented,startOfLine:d,noIndent:w}}return h()}}function w(d){return function(f){d&&(C="error");if("endTag"==f)return V.context&&(V.context=V.context.prev),h();C="error";return h(arguments.callee)}}function pa(d){return"word"==d?(C="attribute",h(pa)):"equals"==d?h(O,pa):"string"==d?(C="error",h(pa)):F()}function O(d){return"word"==d&&ba.allowUnquoted?(C="string",h()):"string"==d?h(J):F()}function J(d){return"string"==d?h(J):F()}var P=x.indentUnit,ba=Q.htmlMode?{autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0},allowUnquoted:!0}:{autoSelfClosers:{},doNotIndent:{},allowUnquoted:!1},y=Q.alignCDATA,ha,N,V,C;return{startState:function(){return{tokenize:G,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(f,h){f.sol()&&(h.startOfLine=!0,h.indented=f.indentation());if(f.eatSpace())return null;C=N=ha=null;var w=h.tokenize(f,h);h.type=N;if((w||N)&&"comment"!=w)for(V=h;!(h.cc.pop()||d)(N||w););h.startOfLine=!1;return C||w},indent:function(d,f,h){var r=d.context;if(d.tokenize!=I&&d.tokenize!=G||r&&r.noIndent)return h?h.match(/^(\s*)/)[0].length:0;if(y&&/<!\[CDATA\[/.test(f))return 0;r&&/^<\//.test(f)&&(r=r.prev);for(;r&&!r.startOfLine;)r=r.prev;return r?r.indent+P:0},compareStates:function(d,f){if(d.indented!=f.indented||d.tokenize!=f.tokenize)return!1;for(var h=d.context,r=f.context;;h=h.prev,r=r.prev){if(!h||!r)return h==r;if(h.tagName!=r.tagName)return!1}},electricChars:"/"}});CodeMirror.defineMIME("application/xml","xml");CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});CodeMirror.defineMode("javascript",function(x,Q){function G(d,f){for(var h=!1,a;null!=(a=d.next());){if(a==f&&!h)return!1;h=!h&&"\\"==a}return h}function I(d,f,h){ya=d;Oa=h;return f}function W(d,f){var h=d.next();if('"'==h||"'"==h)return h=da(h),f.tokenize=h,h(d,f);if(/[\[\]{}\(\),;\:\.]/.test(h))return I(h);if("0"==h&&d.eat(/x/i))return d.eatWhile(/[\da-f]/i),I("number","number");if(/\d/.test(h))return d.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),I("number","number");if("/"==h){if(d.eat("*"))return h=Y,f.tokenize=h,h(d,f);if(d.eat("/"))return d.skipToEnd(),I("comment","comment");if(f.reAllowed)return G(d,"/"),d.eatWhile(/[gimy]/),I("regexp","string");d.eatWhile(ca);return I("operator",null,d.current())}if("#"==h)return d.skipToEnd(),I("error","error");if(ca.test(h))return d.eatWhile(ca),I("operator",null,d.current());d.eatWhile(/[\w\$_]/);var h=d.current(),a=La.propertyIsEnumerable(h)&&La[h];return a&&f.kwAllowed?I(a.type,a.style,h):I("variable","variable",h)}function da(d){return function(f,h){G(f,d)||(h.tokenize=W);return I("string","string")}}function Y(d,f){for(var h=!1,a;a=d.next();){if("/"==a&&h){f.tokenize=W;break}h="*"==a}return I("comment","comment")}function F(d,f,h,a,b,c){this.indented=d;this.column=f;this.type=h;this.prev=b;this.info=c;null!=a&&(this.align=a)}function h(){for(var d=arguments.length-1;0<=d;d--)E.cc.push(arguments[d])}function d(){h.apply(null,arguments);return!0}function f(d){var f=E.state;if(f.context){E.marked="def";for(var h=f.localVars;h;h=h.next)if(h.name==d)return;f.localVars={name:d,next:f.localVars}}}function w(){E.state.context||(E.state.localVars=va);E.state.context={prev:E.state.context,vars:E.state.localVars}}function pa(){E.state.localVars=E.state.context.vars;E.state.context=E.state.context.prev}function O(d,f){var h=function(){var a=E.state;a.lexical=new F(a.indented,E.stream.column(),d,null,a.lexical,f)};h.lex=!0;return h}function J(){var d=E.state;d.lexical.prev&&(")"==d.lexical.type&&(d.indented=d.lexical.indented),d.lexical=d.lexical.prev)}function P(g){return function(f){return f==g?d():";"==g?h():d(arguments.callee)}}function ba(g){return"var"==g?d(O("vardef"),r,P(";"),J):"keyword a"==g?d(O("form"),y,ba,J):"keyword b"==g?d(O("form"),ba,J):"{"==g?d(O("}"),T,J):";"==g?d():"function"==g?d(Ka):"for"==g?d(O("form"),P("("),O(")"),la,P(")"),J,ba,J):"variable"==g?d(O("stat"),V):"switch"==g?d(O("form"),y,O("}","switch"),P("{"),T,J,J):"case"==g?d(y,P(":")):"default"==g?d(P(":")):"catch"==g?d(O("form"),w,P("("),wa,P(")"),ba,J,pa):h(O("stat"),y,P(";"),J)}function y(g){return Da.hasOwnProperty(g)?d(N):"function"==g?d(Ka):"keyword c"==g?d(ha):"("==g?d(O(")"),y,P(")"),J,N):"operator"==g?d(y):"["==g?d(O("]"),D(y,"]"),J,N):"{"==g?d(O("}"),D(p,"}"),J,N):d()}function ha(d){return d.match(/[;\}\)\],]/)?h():h(y)}function N(g,f){if("operator"==g&&/\+\+|--/.test(f))return d(N);if("operator"==g)return d(y);if(";"!=g){if("("==g)return d(O(")"),D(y,")"),J,N);if("."==g)return d(C,N);if("["==g)return d(O("]"),y,P("]"),J,N)}}function V(g){return":"==g?d(J,ba):h(N,P(";"),J)}function C(g){if("variable"==g)return E.marked="property",d()}function p(g){"variable"==g&&(E.marked="property");if(Da.hasOwnProperty(g))return d(P(":"),y)}function D(g,f){function p(a){return","==a?d(g,p):a==f?d():d(P(f))}return function(a){return a==f?d():h(g,p)}}function T(g){return"}"==g?d():h(ba,T)}function r(g,h){return"variable"==g?(f(h),d(ia)):d()}function ia(g,f){if("\x3d"==f)return d(y,ia);if(","==g)return d(r)}function la(g){return"var"==g?d(r,ua):";"==g?h(ua):"variable"==g?d(rb):h(ua)}function rb(g,f){return"in"==f?d(y):d(N,ua)}function ua(g,f){return";"==g?d(Ma):"in"==f?d(y):d(y,P(";"),Ma)}function Ma(g){")"!=g&&d(y)}function Ka(g,h){if("variable"==g)return f(h),d(Ka);if("("==g)return d(O(")"),w,D(wa,")"),J,ba,pa)}function wa(g,h){if("variable"==g)return f(h),d()}var ea=x.indentUnit,Pa=Q.json,La=function(){function d(a){return{type:a,style:"keyword"}}var f=d("keyword a"),h=d("keyword b"),a=d("keyword c"),b=d("operator"),c={type:"atom",style:"atom"};return{"if":f,"while":f,"with":f,"else":h,"do":h,"try":h,"finally":h,"return":a,"break":a,"continue":a,"new":a,"delete":a,"throw":a,"var":d("var"),"const":d("var"),let:d("var"),"function":d("function"),"catch":d("catch"),"for":d("for"),"switch":d("switch"),"case":d("case"),"default":d("default"),"in":b,"typeof":b,"instanceof":b,"true":c,"false":c,"null":c,undefined:c,NaN:c,Infinity:c}}(),ca=/[+\-*&%=<>!?|]/,ya,Oa,Da={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},E={state:null,column:null,marked:null,cc:null},va={name:"this",next:{name:"arguments"}};J.lex=!0;return{startState:function(d){return{tokenize:W,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new F((d||0)-ea,0,"block",!1),localVars:null,context:null,indented:0}},token:function(d,f){d.sol()&&(f.lexical.hasOwnProperty("align")||(f.lexical.align=!1),f.indented=d.indentation());if(d.eatSpace())return null;var h=f.tokenize(d,f);if("comment"==ya)return h;f.reAllowed="operator"==ya||"keyword c"==ya||ya.match(/^[\[{}\(,;:]$/);f.kwAllowed="."!=ya;a:{var a=ya,b=Oa,c=f.cc;E.state=f;E.stream=d;E.marked=null;E.cc=c;f.lexical.hasOwnProperty("align")||(f.lexical.align=!0);for(;;)if((c.length?c.pop():Pa?y:ba)(a,b)){for(;c.length&&c[c.length-1].lex;)c.pop()();if(E.marked){h=E.marked;break a}if(a="variable"==a)b:{for(a=f.localVars;a;a=a.next)if(a.name==b){a=!0;break b}a=void 0}if(a){h="variable-2";break a}break a}}return h},indent:function(d,f){if(d.tokenize!=W)return 0;var h=f&&f.charAt(0),a=d.lexical,b=a.type,c=h==b;return"vardef"==b?a.indented+4:"form"==b&&"{"==h?a.indented:"stat"==b||"form"==b?a.indented+ea:"switch"!=a.info||c?a.align?a.column+(c?0:1):a.indented+(c?0:ea):a.indented+(/^(?:case|default)\b/.test(f)?ea:2*ea)},electricChars:":{}"}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});CodeMirror.defineMode("css",function(x){function Q(h,d){F=d;return h}function G(h,d){var f=h.next();if("@"==f)return h.eatWhile(/[\w\\\-]/),Q("meta",h.current());if("/"==f&&h.eat("*"))return d.tokenize=I,I(h,d);if("\x3c"==f&&h.eat("!"))return d.tokenize=W,W(h,d);if("\x3d"==f)Q(null,"compare");else{if("~"!=f&&"|"!=f||!h.eat("\x3d")){if('"'==f||"'"==f)return d.tokenize=da(f),d.tokenize(h,d);if("#"==f)return h.eatWhile(/[\w\\\-]/),Q("atom","hash");if("!"==f)return h.match(/^\s*\w*/),Q("keyword","important");if(/\d/.test(f))return h.eatWhile(/[\w.%]/),Q("number","unit");if(/[,.+>*\/]/.test(f))return Q(null,"select-op");if(/[;{}:\[\]]/.test(f))return Q(null,f);h.eatWhile(/[\w\\\-]/);return Q("variable","variable")}return Q(null,"compare")}}function I(h,d){for(var f=!1,w;null!=(w=h.next());){if(f&&"/"==w){d.tokenize=G;break}f="*"==w}return Q("comment","comment")}function W(h,d){for(var f=0,w;null!=(w=h.next());){if(2<=f&&"\x3e"==w){d.tokenize=G;break}f="-"==w?f+1:0}return Q("comment","comment")}function da(h){return function(d,f){for(var w=!1,x;null!=(x=d.next())&&(x!=h||w);)w=!w&&"\\"==x;w||(f.tokenize=G);return Q("string","string")}}var Y=x.indentUnit,F;return{startState:function(h){return{tokenize:G,baseIndent:h||0,stack:[]}},token:function(h,d){if(h.eatSpace())return null;var f=d.tokenize(h,d),w=d.stack[d.stack.length-1];"hash"==F&&"rule"==w?f="atom":"variable"==f&&("rule"==w?f="number":w&&"@media{"!=w||(f="tag"));"rule"==w&&/^[\{\};]$/.test(F)&&d.stack.pop();"{"==F?"@media"==w?d.stack[d.stack.length-1]="@media{":d.stack.push("{"):"}"==F?d.stack.pop():"@media"==F?d.stack.push("@media"):"{"==w&&"comment"!=F&&d.stack.push("rule");return f},indent:function(h,d){var f=h.stack.length;/^\}/.test(d)&&(f-="rule"==h.stack[h.stack.length-1]?2:1);return h.baseIndent+f*Y},electricChars:"}"}});CodeMirror.defineMIME("text/css","css");CodeMirror.defineMode("htmlmixed",function(x,Q){function G(d,f){var w=Y.token(d,f.htmlState);"tag"==w&&"\x3e"==d.current()&&f.htmlState.context&&(/^script$/i.test(f.htmlState.context.tagName)?(f.token=W,f.localState=F.startState(Y.indent(f.htmlState,"")),f.mode="javascript"):/^style$/i.test(f.htmlState.context.tagName)&&(f.token=da,f.localState=h.startState(Y.indent(f.htmlState,"")),f.mode="css"));return w}function I(d,f,h){var x=d.current();f=x.search(f);-1<f&&d.backUp(x.length-f);return h}function W(d,f){return d.match(/^<\/\s*script\s*>/i,!1)?(f.token=G,f.curState=null,f.mode="html",G(d,f)):I(d,/<\/\s*script\s*>/,F.token(d,f.localState))}function da(d,f){return d.match(/^<\/\s*style\s*>/i,!1)?(f.token=G,f.localState=null,f.mode="html",G(d,f)):I(d,/<\/\s*style\s*>/,h.token(d,f.localState))}var Y=CodeMirror.getMode(x,{name:"xml",htmlMode:!0}),F=CodeMirror.getMode(x,"javascript"),h=CodeMirror.getMode(x,"css");return{startState:function(){var d=Y.startState();return{token:G,localState:null,mode:"html",htmlState:d}},copyState:function(d){if(d.localState)var f=CodeMirror.copyState(d.token==da?h:F,d.localState);return{token:d.token,localState:f,mode:d.mode,htmlState:CodeMirror.copyState(Y,d.htmlState)}},token:function(d,f){return f.token(d,f)},indent:function(d,f){return d.token==G||/^\s*<\//.test(f)?Y.indent(d.htmlState,f):d.token==W?F.indent(d.localState,f):h.indent(d.localState,f)},compareStates:function(d,f){return Y.compareStates(d.htmlState,f.htmlState)},electricChars:"/{}:"}});CodeMirror.defineMIME("text/html","htmlmixed");